;************************************
;** Файл организациии задержек программным способом
;**
;**
;************************************

;Формула данной задержки
;(3*R20+5)*R19+10
; R20=165
; r19 =0 128010 тактов
; r19 =1 510 тактов
; r19 =2 1010 татов
Delay:
	push r20
loop0:
	ldi r20,0xA5
loop1:
	dec r20
	brne loop1
	nop
	nop
	dec r1
	brne loop0

	pop r20
	ret

;************************************
;Небольшая задержка в 500 тактов
;Формула 12+4*R16
;При 122 задержка в 500 тактов что соответствует 0,5мсек при 1Мгц
DelaySmall:
		push r16
		ldi r16, 122
delay_loop:
		nop
		dec r16
		brne delay_loop
		nop
		pop r16
		ret
;************************************
;Небольшая задержка в микросекундах
;Формула 7+10*2*R16
;При 1 задержка в 2007 тактов что соответствует 100,35мксек при 20Мгц
delay_mcs:
usDelay:
		lsl r18
delay_us:
		nop
		nop
		nop
		nop
		nop
		nop
		nop
		dec r18
		brne delay_us
		ret
;************************************
;формула данной подпрограммы задержки
;((3*R20+3)*R21+4)*R22+20)
;
; пару примеров
;	для 1000000 тактов   100 165  20
;	для 2000000 тактов	  45 161  90	
;	для  500000 тактов	 223 248   3
;	для 6000000 тактов	 135 173  85
;	для 8000000 тактов	  95 224 124
DelayLong:
	push r20
	push r21
	push r22

	ldi r22, 20
loopL2:
	ldi r21, 165
loopL1:
	ldi r20,100
loopL0:
	dec r20
	brne loopL0
	dec r21
	brne LoopL1
	nop
	dec r22
	brne LoopL2

	nop
	pop r22
	pop r21
	pop r20
	ret
;************************************
;формула данной подпрограммы задержки
;((3*R20+3)*R21+4)*R22+14)
;
; пару примеров
;	247 26 1 = 20025 тактов или 1 мсек при 20 МГц

delay_ms:
msDelay:
	push r20
	push r19
	
loopL20:
	ldi r19, 247
loopL10:
	ldi r21,26
loopL00:
	dec r21
	brne loopL00
	dec r19
	brne LoopL10
	nop
	dec r18
	brne LoopL20

	pop r19
	pop r20
	ret
