/*
;****************************************
;**
;**			START
;**		LESSON_002_AnaComp
;**
;**
;****************************************
Подпрограмма инициализации аналогового компоратора

Подпрограмма работы по аналоговому компоратору
Будем инвертировать выход каждый раз при вызове подпрограммы прерывания от компоратора


;****************************************
;**
;**			END
;**		LESSON_002_AnaComp
;**
;**
;****************************************
*/

AnaComp_Init:
;-------------------------- Инициализация Порта ввода/вывода B

		ldi		r16, 0xFF	; Записываем число $FF в регистр r16
		out		DDRB, r16	; Записываем это число в DDRB
		ldi		r16, 0x00	; Записываем число $F0 в регистр r16
		out		PORTB, r16	; Записываем то  же число в PORTB
; проинициализировали порт B на вывод 

		ldi r16, (1<<ACIE)|(0<<ACD)|(1<<ACIS1)|(1<<ACIS0)
		out ACSR, r16
	
		ret
; подпрограмма инвертирования бита РВ0
; каждый раз при срабатывании компоратора
ANA_COMP:

rjmp work_AnaComp




work_AnaComp:
		in r16, PORTB
		ldi r17,1<<PB0
		eor r16,r17
		out PORTB,r16
		reti
;****************************************










