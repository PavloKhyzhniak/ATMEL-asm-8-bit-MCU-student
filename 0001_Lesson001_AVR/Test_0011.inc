;**************************************
; работа с кнопками по внешним прерываниям
; это не освобождает нас от борьбы с дребезгом
; а также определения нажатой кнопки
;
work_ButINT01:
;-------------------------- Инициализация Порта ввода/вывода B

		ldi		r16, 0xFF	; Записываем число $FF в регистр r16
		out		DDRB, r16	; Записываем это число в DDRB
		ldi		r16, 0xF0	; Записываем число $F0 в регистр r16
		out		PORTB, r16	; Записываем то  же число в PORTB
; проинициализировали порт B на вывод 

;-------------------------- Инициализация Порта ввода/вывода D

		ldi		r16, 0x00	; Записываем число $00 в регистр r16
		out		DDRD, r16	; Записываем это число в DDRD
		ldi		r16, 0x00	; Записываем число $00 в регистр r16
		out		PORTD, r16	; Записываем то  же число в PORTD
; проинициализировали порт D на ввод 

; настроим обработку внешних прерываний по приходу фронта сигнала
		in r16, MCUCR
		ori r16,0x0f
		out MCUCR,r16

; разрешим наши внешние прерывания	
		in r16,GICR
		ori r16,(1<<INT0)|(1<<INT1)
		out GICR,r16


; преобразуем регистр для вывода
	mov tmp2,Flags
;	ldi tmp3,0x0F
;	eor tmp2,tmp3
nop
nop
	out PORTB,tmp2

		sleep
		rjmp PC-5

;**************************************


