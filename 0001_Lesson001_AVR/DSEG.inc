;************************************
;** Файл резервирования переменных в ОЗУ и констант
;**
;**
;************************************

;************************************
;выбор сегмента EEPROM
.eseg
.org	0x10

eepromTu:	.BYTE 1

;************************************
.dseg
.org 0x060

Power:	.BYTE 1

dataRx_buf: .BYTE 32;данные на прием
dataTx_buf: .BYTE 32;данные на передачу

AD1H: .BYTE 1; сумма значений подсчитанного по каналу АЦП 1 (напряжение)
AD1L: .BYTE 1

AD3H: .BYTE 1; сумма значений подсчитанных по каналу АЦП 3 (ток)
AD3L: .BYTE 1

Ul:	.BYTE 1	; младший байт выведенного значения напряжения
Uh:	.BYTE 1	; старший байт выведенного значения напряжения
Il:	.BYTE 1	;
Ih:	.BYTE 1	;

U2: .BYTE 1; значение по напряжению старшая цифра
U1: .BYTE 1; значение по напряжению
U0: .BYTE 1; значение по напряжению младшая цифра

I1: .BYTE 1; значение по току старшая цифра
I0: .BYTE 1; значение по току младшая цифра

stolbik: .BYTE 1; значение для столбика тока

cntI: .BYTE 1; счетчик количество замеров по току
cntU: .BYTE 1; счетчик количества замеров по напряжению

T1l: .BYTE 1	;младший байт температуры считанной с датчика №1
T1h: .BYTE 1	;
T2l: .BYTE 1	;младший байт температуры считанной с датчика №2
T2h: .BYTE 1	;

TT2: .BYTE 1; значение температуры старшая цифра
TT1: .BYTE 1; значение температуры
TT0: .BYTE 1; значение температуры младшая цифра

bufLAN: .BYTE 8	; буфер принятых данных
;************************************


;************************************
.cseg
;запишем необходимые константы
.equ END_DATA = '+'
.equ START_DATA = ':'

//константы предустановок  МК
.equ T0PRE=-5	
.equ T2PRE=-150;-125;2	




;************************************
; инициализируем необходимые названия для выводов

; канал Tx/Rx
.set PortX = PD2
.set KeyTRIAC = PD2


; кнопкa 
.set tempKey1 = PD3



; Таблица углов открывания для тиристора(задержка)
; Предделитель Таймера0 выбран = 64
TableTRIAC:
.db 255-(0000/64), 255-(2587/64)
 ;полностью открыт ;90 % мощности
.db 255-(3362/64), 255-(3962/64) 
;80 % мощности	   ;70 % мощности
.db 255-(4494/64), 255-(4999/64) 
;60 % мощности	   ;50 % мощности
.db 255-(5503/64), 255-(6035/64)
;40 % мощности	   ;30 % мощности
.db 255-(6636/64), 255-(7410/64) 
;20 % мощности     ;10 % мощности

;************************************

.cseg			; выбор сегмента памяти программ
dataRX: .db ':','R','S','-','4','8','5','+'
dataTX: .db ':','P','C','-','A','V','R','+'
; личные позывные каждого микроконтроллера
; 4 байта ID
dataID:	.db 'I','D','M','K','B','P','R','F','S','F'
; воспринимаемы команды
	; запрос на байт из памяти программ
;dataBP: 
	; запрос на байт из регистрового файла или I/O
;dataRF: 
	; специальный ответ
;dataSF: 
